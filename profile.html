<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Profile - Blue Ember Electronics</title>
    <meta name="description" content="View your Blue Ember Electronics profile dashboard, recent orders, and account stats.">
    <link rel="icon" type="image/png" href="assets/favicon.png" style="border-radius: 50%;">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300..700&display=swap" rel="stylesheet">

    <!-- Icons -->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link href='https://cdn.boxicons.com/3.0.6/fonts/basic/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Stylesheets -->
    <link href="universal.css" rel="stylesheet">
    <link href="darkmode.css" rel="stylesheet">
    <link href="navbar.css" rel="stylesheet">
    <link href="mobile-sidebar.css" rel="stylesheet">
    <link href="account.css" rel="stylesheet">
    <link href="home.css" rel="stylesheet">

    <!-- Custom Profile CSS for Grid -->
    <style>
        .profile-dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .dashboard-stat-card {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 20px;
            transition: transform 0.3s ease;
        }

        .dashboard-stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 15px;
            background: linear-gradient(135deg, #e0f2fe 0%, #bae6fd 100%);
            color: #0099ff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
        }

        .stat-info h3 {
            font-size: 24px;
            font-weight: 700;
            color: #1e293b;
            margin: 0;
            font-family: 'Space Grotesk', sans-serif;
        }

        .stat-info p {
            color: #64748b;
            margin: 0;
            font-size: 14px;
        }

        .orders-table-container {
            overflow-x: auto;
        }

        .orders-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 15px;
        }

        .orders-table th {
            text-align: left;
            padding: 15px;
            color: #64748b;
            font-weight: 600;
            border-bottom: 1px solid #e2e8f0;
        }

        .orders-table td {
            padding: 15px;
            color: #334155;
            border-bottom: 1px solid #f1f5f9;
        }

        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-processing {
            background: #fef3c7;
            color: #d97706;
        }

        .status-delivered {
            background: #dcfce7;
            color: #16a34a;
        }

        .status-cancelled {
            background: #fee2e2;
            color: #dc2626;
        }

        /* Dark Mode overrides */
        body.dark-mode .dashboard-stat-card {
            background: var(--dm-card-bg);
            border-color: var(--dm-border);
        }

        body.dark-mode .stat-info h3 {
            color: var(--dm-text-primary);
        }

        body.dark-mode .orders-table th {
            color: var(--dm-text-secondary);
            border-color: var(--dm-border);
        }

        body.dark-mode .orders-table td {
            color: var(--dm-text-primary);
            border-color: var(--dm-border);
        }

        .thebigtwo{
            border: 1px solid #3a3a3a;
            border-radius: 30px;

        }
    </style>

    <!-- Scripts -->
    <!-- Core Dependencies (No defer for immediate availability) -->
    <script src="js/db-client.js"></script>
    
    <!-- Authentication (depends on db-client) -->
    <script src="js/auth.js"></script>
    
    <!-- Logout Modal Script (MUST load first to avoid conflicts) -->
    <script src="js/logout-modal.js"></script>
    
    <!-- UI Functionality Scripts (depend on auth and logout-modal) -->
    <script src="js/darkmode.js" defer></script>
    <script src="js/profile-dropdown.js" defer></script>
    <script src="js/navigation.js" defer></script>
    
    <!-- Page-specific Scripts (depend on all above) -->
    <script src="js/profile.js" defer></script>
</head>

<body>
    <!-- Navbar -->
    <nav>
        <div class="navbar-container" style="justify-content: space-between;">
           
            <a href="index.html" class="navbar-logo">
                <img src="assets/BlueEmber-ezgif.com-gif-maker.gif" alt="Blue Ember animated logo"
            style="width: 30px; height: auto;">
          <span>
            <h6 style="color: #0099ff; font-size: large; margin: 0px 0px -6px 0px;">BLUE</h6>
            <h6 style="color: #ffffff; font-size: large; margin: 0px 0px -6px 0px;">EMBER</h6>
          </span>
            </a>
            <ul class="navbar">
                <li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="products.html"><i class="fas fa-box"></i> Products</a></li>
                <li><a href="brands.html"><i class="fas fa-star"></i> Brands</a></li>
                <li><a href="contact.html"><i class="fas fa-envelope"></i> Contact</a></li>
            </ul>
            <div class="thebigtwo">
            <div style="margin-left: auto;display: flex;align-items: center;gap: 4px;padding: 0px 2px 0px 0px;">
                <button id="dark-mode-toggle" class="navbar-toggle"><i class="fas fa-moon"></i></button>
                <button class="profile-icon-btn" id="profileIconBtn">
                    <img src="" alt="Profile" class="profile-icon-img" id="profileIconImg">
                    <i class="fas fa-user profile-icon-placeholder"></i>
                </button>
                </div>
                <!-- Reuse Profile Dropdown -->
                <div class="profile-dropdown-container" id="profileDropdownContainer" style="display: none;">
                    <div class="profile-dropdown" id="profileDropdown">
                        <ul class="profile-dropdown-list">
                            <li><a href="profile.html" class="profile-dropdown-item active"><i
                                        class="fa-regular fa-user"></i><span>Profile</span></a></li>
                            <li><a href="#" class="profile-dropdown-item"><i
                                        class="fa-regular fa-comments"></i><span>Purchases & Reviews</span></a></li>
                            <li><a href="#" class="profile-dropdown-item"><i
                                        class="fa-regular fa-credit-card"></i><span>Subscription</span><span
                                        class="pro-badge">PRO</span></a></li>
                            <li><a href="account.html" class="profile-dropdown-item"><i
                                        class="fa-solid fa-toggle-off"></i><span>Account Settings</span></a></li>
                        </ul>
                        <div class="profile-dropdown-divider"></div>
                        <ul class="profile-dropdown-list">
                            <li><a href="#" class="profile-dropdown-item"><i
                                        class="fa-regular fa-circle-question"></i><span>Help center</span></a></li>
                            <li><a href="#" class="profile-dropdown-item" id="nav-dropdown-logout"><i
                                        class="fas fa-sign-out-alt"></i><span>Logout</span></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Mobile Sidebar -->
    <div class="mobile-menu" id="mobileMenu">
        <div class="sidebar-header">
            <div class="header-brand default-brand">
                <div class="navbar-logo">
                    <img src="assets/BlueEmber-ezgif.com-gif-maker.gif" alt="Logo" style="width: 30px;">
                    <span>
                        <h6 style="color: #0099ff;">BLUE</h6>
                        <h6 style="color: white;">EMBER</h6>
                    </span>
                </div>
                <div class="user-info"><span class="user-name"></span><span class="user-status"></span></div>
            </div>
            <button class="close-sidebar-btn" id="closeBtn"><i class="fa-solid fa-times"></i></button>
        </div>
        <div class="sidebar-content">
            <a href="index.html" class="sidebar-nav-item"><i class="fa-solid fa-house"></i><span>Home</span></a>
            <a href="account.html" class="sidebar-nav-item"><i class="fa-solid fa-user"></i><span>Account
                    Settings</span></a>
            <a href="contact.html" class="sidebar-nav-item"><i class="fa-solid fa-envelope"></i><span>Contact
                    Us</span></a>
        </div>
    </div>

    <!-- Main Content -->
    <main class="account-settings-main">
        <div class="account-container">
            <!-- Welcome Header -->
            <div style="display: flex; align-items: center; margin-bottom: 20px; gap:15px;">
                <div class="profile-pic-container" style="width: 150px;height: 150px;object-fit: cover;overflow: hidden;align-content: center;border-radius: 3284px;">
                    <img src="" id="dashboardProfilePic" class="profile-pic-img" style="display: none;">
                    <div class="profile-pic-placeholder" style="font-size: 32px;"><i class="bx bx-user"></i></div>
                </div>
                <div>
                    <h1 class="page-title" style="margin-bottom: 5px;">My Profile</h1>
                    <p style="color: #64748b; font-size: 16px;" id="welcomeMsg">Welcome back!</p>
                </div>
                <!-- Profile Picture (Large) -->
                
            </div>

            <!-- Profile Tabs -->
            <div class="tabs-navigation">
                <button class="tab-btn active" data-tab="dashboard">
                    <i class="bx bx-grid-alt"></i> Dashboard
                </button>
                <button class="tab-btn" data-tab="orders">
                    <i class="bx bx-package"></i> My Orders
                </button>
                <button class="tab-btn" data-tab="wishlist">
                    <i class="bx bx-heart"></i> Wishlist
                </button>
            </div>

            <!-- TAB CONTENT -->
            <div class="tabs-content">

                <!-- DASHBOARD TAB -->
                <div class="tab-pane active" id="dashboard-tab">
                    <!-- Stats Grid -->
                    <div class="profile-dashboard">
                        <div class="dashboard-stat-card">
                            <div class="stat-icon"><i class="bx bx-shopping-bag"></i></div>
                            <div class="stat-info">
                                <h3 id="statTotalOrders">0</h3>
                                <p>Total Orders</p>
                            </div>
                        </div>
                        <div class="dashboard-stat-card">
                            <div class="stat-icon"
                                style="background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%); color: #16a34a;">
                                <i class="bx bx-star"></i></div>
                            <div class="stat-info">
                                <h3 id="statReviews">0</h3>
                                <p>Reviews</p>
                            </div>
                        </div>
                        <div class="dashboard-stat-card">
                            <div class="stat-icon"
                                style="background: linear-gradient(135deg, #fae8ff 0%, #f5d0fe 100%); color: #d946ef;">
                                <i class="bx bx-heart"></i></div>
                            <div class="stat-info">
                                <h3 id="statWishlist">0</h3>
                                <p>Wishlist</p>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Orders Section -->
                    <div class="account-card">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h2>Recent Orders</h2>
                            <button class="btn btn-outline btn-sm" onclick="switchTab('orders')">View All</button>
                        </div>
                        <div class="orders-table-container">
                            <table class="orders-table">
                                <thead>
                                    <tr>
                                        <th>Order ID</th>
                                        <th>Date</th>
                                        <th>Status</th>
                                        <th>Total</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody id="recentOrdersBody">
                                    <!-- Populated by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="profile-dashboard" style="margin-top: 30px;">
                        <a href="account.html" class="dashboard-stat-card"
                            style="text-decoration: none; justify-content: center; flex-direction: column; text-align: center;">
                            <div class="stat-icon" style="background: #f1f5f9; color: #475569;"><i
                                    class="bx bx-cog"></i></div>
                            <div class="stat-info">
                                <h3 style="font-size: 18px;">Account Settings</h3>
                                <p>Manage details</p>
                            </div>
                        </a>
                        <a href="account.html" class="dashboard-stat-card"
                            style="text-decoration: none; justify-content: center; flex-direction: column; text-align: center;">
                            <div class="stat-icon" style="background: #f1f5f9; color: #475569;"><i
                                    class="bx bx-map"></i></div>
                            <div class="stat-info">
                                <h3 style="font-size: 18px;">Addresses</h3>
                                <p>Manage locations</p>
                            </div>
                        </a>
                        <a href="account.html" class="dashboard-stat-card"
                            style="text-decoration: none; justify-content: center; flex-direction: column; text-align: center;">
                            <div class="stat-icon" style="background: #f1f5f9; color: #475569;"><i
                                    class="bx bx-wallet"></i></div>
                            <div class="stat-info">
                                <h3 style="font-size: 18px;">Payment Methods</h3>
                                <p>Manage cards</p>
                            </div>
                        </a>
                    </div>
                </div>

                <!-- ORDERS TAB -->
                <div class="tab-pane" id="orders-tab">
                    <div class="account-card">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h2 style="margin: 0;">My Orders</h2>
                            <div style="display: flex; gap: 10px;">
                                <select id="orderFilter" class="form-control" style="width: auto; padding: 8px 15px;">
                                    <option value="all">All Orders</option>
                                    <option value="active">Active (Processing/Shipped)</option>
                                    <option value="completed">Completed (Delivered)</option>
                                    <option value="cancelled">Cancelled</option>
                                </select>
                            </div>
                        </div>
                        <div class="orders-table-container">
                            <table class="orders-table">
                                <thead>
                                    <tr>
                                        <th>Order ID</th>
                                        <th>Date</th>
                                        <th>Items</th>
                                        <th>Status</th>
                                        <th>Total</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody id="allOrdersBody">
                                    <!-- Populated by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- WISHLIST TAB -->
                <div class="tab-pane" id="wishlist-tab">
                    <div class="account-card" style="text-align: center; padding: 50px;">
                        <div style="font-size: 48px; color: #cbd5e1; margin-bottom: 15px;"><i class="bx bx-heart"></i>
                        </div>
                        <h3>Your Wishlist is empty</h3>
                        <p style="color: #64748b;">Save items you love to buy later.</p>
                        <a href="products.html" class="btn btn-primary" style="margin-top: 15px;">Start Shopping</a>
                    </div>
                </div>

                <!-- ORDER DETAILS VIEW (Hidden by default, shown via JS) -->
                <div id="orderDetailsView" style="display: none;">
                    <button class="btn btn-text" onclick="closeOrderDetails()"
                        style="margin-bottom: 20px; color: #64748b;">
                        <i class="bx bx-arrow-back"></i> Back to Orders
                    </button>

                    <div class="account-card">
                        <div
                            style="display: flex; justify-content: space-between; flex-wrap: wrap; gap: 20px; border-bottom: 1px solid #e2e8f0; padding-bottom: 20px; margin-bottom: 25px;">
                            <div>
                                <h2 style="margin-bottom: 5px;" id="detailOrderId">Order #EV-0000</h2>
                                <p style="color: #64748b; font-size: 14px;">Placed on <span id="detailOrderDate">Dec 12,
                                        2024</span></p>
                            </div>
                            <div style="text-align: right;">
                                <h3 style="color: #0099ff; font-size: 24px; margin-bottom: 5px;" id="detailOrderTotal">
                                    $0.00</h3>
                                <span class="status-badge" id="detailOrderStatus">Processing</span>
                            </div>
                        </div>

                        <!-- Order Timeline -->
                        <div class="order-timeline" style="margin-bottom: 40px;">
                            <!-- Injected via JS -->
                        </div>

                        <!-- Order Items -->
                        <h3 style="font-size: 18px; margin-bottom: 15px;">Items in your order</h3>
                        <div id="detailItemsList"
                            style="display: flex; flex-direction: column; gap: 15px; margin-bottom: 30px;">
                            <!-- Injected via JS -->
                        </div>

                        <!-- Order Info Grid -->
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px; background: #f8fafc; padding: 20px; border-radius: 12px;"
                            id="orderInfoGrid">
                            <div>
                                <h4
                                    style="font-size: 14px; color: #64748b; margin-bottom: 10px; text-transform: uppercase;">
                                    Shipping Address</h4>
                                <p id="detailShippingAddr" style="font-size: 15px; line-height: 1.6; color: #334155;">
                                    -
                                </p>
                            </div>
                            <div>
                                <h4
                                    style="font-size: 14px; color: #64748b; margin-bottom: 10px; text-transform: uppercase;">
                                    Payment Method</h4>
                                <p style="font-size: 15px; color: #334155;"><i class="bx bx-credit-card"></i> <span
                                        id="detailPayment">Visa ending in ****</span></p>
                            </div>
                            <div>
                                <h4
                                    style="font-size: 14px; color: #64748b; margin-bottom: 10px; text-transform: uppercase;">
                                    Order Summary</h4>
                                <div
                                    style="display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 15px;">
                                    <span style="color: #64748b;">Subtotal</span>
                                    <span id="detailSubtotal" style="font-weight: 500;">$0.00</span>
                                </div>
                                <div
                                    style="display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 15px;">
                                    <span style="color: #64748b;">Shipping</span>
                                    <span id="detailShippingCost" style="font-weight: 500;">Free</span>
                                </div>
                                <div
                                    style="display: flex; justify-content: space-between; margin-top: 10px; padding-top: 10px; border-top: 1px solid #e2e8f0; font-weight: 700; font-size: 18px;">
                                    <span>Total</span>
                                    <span id="detailFinalTotal">$0.00</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

        </div>
    </main>

    <!-- LOGOUT CONFIRMATION MODAL -->
    <div class="modal" id="logoutModal" aria-hidden="true">
        <div class="modal-overlay logout-modal-overlay" id="logoutModalOverlay"></div>
        <div class="modal-content logout-modal-content">
            <div class="logout-modal-header">
                <div class="logout-icon">
                    <i class="fas fa-sign-out-alt"></i>
                </div>
                <h3>Confirm Logout</h3>
            </div>
            <div class="logout-modal-body">
                <p>Are you sure you want to log out? You'll need to sign in again to access your account.</p>
            </div>
            <div class="logout-modal-actions">
                <button type="button" class="btn btn-secondary logout-cancel-btn" id="logoutCancelBtn">Cancel</button>
                <button type="button" class="btn btn-primary logout-confirm-btn" id="logoutConfirmBtn">
                    <span class="btn-text">
                        <i class="fas fa-sign-out-alt"></i>
                        Log Out
                    </span>
                    <div class="custom-spinner">
                        <div class="spinner center">
                            <div class="spinner-blade"></div>
                            <div class="spinner-blade"></div>
                            <div class="spinner-blade"></div>
                            <div class="spinner-blade"></div>
                            <div class="spinner-blade"></div>
                            <div class="spinner-blade"></div>
                            <div class="spinner-blade"></div>
                            <div class="spinner-blade"></div>
                            <div class="spinner-blade"></div>
                            <div class="spinner-blade"></div>
                            <div class="spinner-blade"></div>
                            <div class="spinner-blade"></div>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>



</body>

</html>